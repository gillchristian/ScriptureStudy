#!/usr/bin/env node

const fs = require('fs/promises');

const parseName = ({ version, chapter }) => {
  const chapter_ = chapter
    .split('-')
    .map(chunk => `${chunk.charAt(0).toUpperCase()}${chunk.substr(1)}`)
    .join(' ')

  return { tag: 'chapter', chapter: chapter_, version }
}

const [input, version] = process.argv.slice(2)

fs.readFile(input, 'utf-8')
  .then(content => content.trim())
  .then(content => content.split('\n'))
  .then(lines => lines.map(line => parseName({ version, chapter: line })))
  .then(options => console.log(JSON.stringify(options, null, 2)))
